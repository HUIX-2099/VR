<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1" />
    <title>VR Museum</title>
    <meta name="description" content="A-Frame VR scene" />

    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <!-- A-Frame Extras (movement-controls, teleport-controls, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

    <!-- App code -->
    <link rel="stylesheet" href="style.css" />
    <script defer src="app.js"></script>
  </head>
  <body>
    <a-scene renderer="colorManagement: true; physicallyCorrectLights: true; antialias: true; precision: high; sortObjects: true; alpha: false; powerPreference: high-performance; logarithmicDepthBuffer: true" background="color: #202225" auto-vr vr-quality="pixelRatioMultiplier: 2; maxPixelRatio: 3; anisotropy: 16" comfort-mode="snapAngle: 30; accel: 8; vignetteOpacity: 0.3">
      <!-- Assets -->
      <a-assets>
        <audio id="clickSnd" src="https://cdn.jsdelivr.net/gh/jshawl/AudioFX/sounds/click1.mp3"></audio>
      </a-assets>

      <!-- Lighting -->
      <a-entity light="type: hemisphere; color: #ffffff; intensity: 0.6" position="0 10 0"></a-entity>
      <a-entity light="type: directional; color: #ffffff; intensity: 0.8" position="3 10 5" rotation="-30 45 0"></a-entity>

      <!-- Environment fallback ground if model lacks one -->
      <a-plane class="floor" position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#3a3d44" material="metalness:0.1; roughness:0.9" shadow="receive: true"></a-plane>

      <!-- Museum Model (lazy) -->
      <a-entity id="museum" lazy-gltf="src: ./museum.glb" position="0 0 0" rotation="0 0 0" scale="1 1 1" shadow="cast: true; receive: true"></a-entity>

      <!-- Player Rig -->
      <a-entity id="rig" position="0 1.6 3">
        <a-entity id="camera" camera look-controls wasd-controls="acceleration: 20" position="0 0 0">
          <!-- Desktop cursor -->
          <a-entity id="cursor"
                    cursor="fuse: false;"
                    raycaster="objects: .interactable, .hotspot"
                    position="0 0 -0.5"
                    geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.008"
                    material="color: #fff; shader: flat">
          </a-entity>
        </a-entity>

        <!-- VR Controllers with laser interaction -->
        <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .interactable, .hotspot"></a-entity>
        <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .interactable, .hotspot" teleport-controls="cameraRig: #rig; teleportOrigin: #camera; button: trigger; collisionEntities: .floor"></a-entity>
      </a-entity>

      <!-- UI: Help Panel -->
      <a-entity id="helpPanel" position="0 2 -1.5" rotation="0 0 0">
        <a-plane width="1.3" height="0.6" color="#111" opacity="0.8"></a-plane>
        <a-entity text="value: WASD to move â€¢ Mouse to look â€¢ Click or trigger to interact; color: #fff; align: center; width: 1.3" position="0 0 0.01"></a-entity>
      </a-entity>

      <!-- Hotspots: click to move the rig to featured viewpoints -->
      <a-entity class="hotspot" geometry="primitive: sphere; radius: 0.1" material="color: #ffbd2e; emissive: #ffbd2e; emissiveIntensity: 0.6"
                position="2 1 -2" hotspot="to: 2 1.6 -2" hoverable sound-on-click></a-entity>
      <a-entity class="hotspot" geometry="primitive: sphere; radius: 0.1" material="color: #ffbd2e; emissive: #ffbd2e; emissiveIntensity: 0.6"
                position="-2 1 -4" hotspot="to: -2 1.6 -4" hoverable sound-on-click></a-entity>
      <a-entity class="hotspot" geometry="primitive: sphere; radius: 0.1" material="color: #ffbd2e; emissive: #ffbd2e; emissiveIntensity: 0.6"
                position="0 1 0" hotspot="to: 0 1.6 0" hoverable sound-on-click></a-entity>

      <!-- Example interactive card -->
      <a-entity position="0 1.5 -1.2" rotation="0 10 0" interactive-card="title: Welcome; body: Explore the museum. Click the yellow orbs to move."></a-entity>

      <!-- Sky -->
      <a-sky color="#1b1e23"></a-sky>
    </a-scene>
  </body>
</html>
